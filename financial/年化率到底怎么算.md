# 年化利率计算

## 1、存款

例：存**10**万元，年化**3%**，存**3**年

- 单利

$$
10*3\\%*3=0.9【万元】
$$

- 复利

$$
10*(1+3\\%)^3=0.927【万元】
$$

**总结：如果存款年限拉的很长，复利的利息是远远超出单利的利息的。**

## 2、内部收益率

【Internal Rate of Return，abbr：**IRR** 】**：资金流入现值总额与资金流出现值总额相等、净现值等于零时的折现率。**

例：有一个产品：前3年每年存10万元，后三年每年取11万元，问：该产品的年化收益率怎么算？

贴现：货币是有时间成本的，如果利率是**x**，今年的**10**万元贴现明年，就变成了**10*(1+x)**万元，反过来说，明年的**10**万元贴现到今年，就变成了**10/(1+x)**万元。这里的x就是内部收益率，俗称**IRR**利率。

在IRR利率的情况下，把所有的存钱和取钱全部贴现到现在，得到如下，存的总数，取的总数

- 存

$$
10+\frac{10}{1+x}+\frac{10}{(1+x)^2}
$$

- 取

$$
\frac{11}{(1+x)^3}+\frac{11}{(1+x)^4}+\frac{11}{(1+x)^5}
$$

两式相等

$$
10+\frac{10}{1+x}+\frac{10}{(1+x)^2}=\frac{11}{(1+x)^3}+\frac{11}{(1+x)^4}+\frac{11}{(1+x)^5}
$$

令**m = 1 + x**，移项通分得

$$
10m^5+10m^4+10m^3-11m^2-11m-11=0
$$

转化为函数利用**牛顿迭代法**求解

$$
f(x)=10m^5+10m^4+10m^3-11m^2-11m-11
$$

求导

$$
f'(x)=50m^4+40m^3+30m^2-22m-11
$$

我们选择一个初始值 $x_0$ ，然后使用以下公式进行迭代：

$$
x_{n+1}=x_n-\frac{f(x_n)}{f'(x_n)}
$$

计算量太大，利用代码实现

```python
def f(x):
    return 10*(1+x)**4 - 3.5*(1+x)**5 + 3.5*(1+x)

def f_prime(x):
    return 4*10*(1+x)**3 - 5*3.5*(1+x)**4 + 3.5

def newton_method(x0, tolerance, max_iterations):
    x = x0
    for _ in range(max_iterations):
        fx = f(x)
        fpx = f_prime(x)
        if abs(fx) < tolerance:
            return x
        x = x - fx/fpx
    return None

# 设置初始值、容差和最大迭代次数
x0 = 0.0
tolerance = 1e-6
max_iterations = 100

# 使用牛顿法求解方程
solution = newton_method(x0, tolerance, max_iterations)

if solution is None:
    print("未找到方程的解")
else:
    print("方程的近似解为:", solution)
```

$$
经过程序计算得：
\begin{cases} 
m = 1.032280119871998 \\ 
x = 0.032280119871998 \approx 3.23\\% 
\end{cases}
$$

## 2、贷款

例1：贷款10万元，4年，利息共4万元

- 一次性还本付息：**x = 8.78%**

$$
10=\frac{14}{(1+4)^4}
$$

- 每年还2.5万元，加上1万元利息：**x = 15%**

$$
10=\frac{3.5}{1+x}+\frac{3.5}{(1+x)^2}+\frac{3.5}{(1+x)^3}+\frac{3.5}{(1+x)^4}
$$

**小结：第一种还款方式，四年期间资金一直在利用，第二种还款方式相较于第一种，由于一直在还钱，本金变少了，利息还是一样的，利率自然就变高了。**

例2：在例1的基础上，在贷款的时候加收一笔手续费1万元

- 每年还3.5万元：**x = 20.35%**

$$
9=\frac{3.5}{1+x}+\frac{3.5}{(1+x)^2}+\frac{3.5}{(1+x)^3}+\frac{3.5}{(1+x)^4}
$$

**真他吗坑**

## 3、现金贷

日息万分之五，借1万元每天还5元，按日计息，随借随还

- 单利，一次性还本付息

$$
x=\frac{5}{10000}*365=18.25\%
$$

## 4、分期购物

1万元，分12期，每个月偿还十二分之一的本金，加上0.5%的利息。

$$
本金=\sum_{i=0}^{nT}\frac{第i期支付金额}{(1+x)^(\frac{i}{n})}
\begin{cases} 
n：每年还款次数 \\ 
T：还款年限 \\ 
x：IRR利率
\end{cases}
$$

$$
当
\begin{rcases} 
\begin{cases}
本金 = 1 \\ 
第i期支付金额 = \frac{1}{12}+0.005 \\ 
n = 12 \\ 
T = 1 
\end{cases}
\end{rcases}
时,x = 13.3\\%
$$

## 总结：

**理财有风险，投资需谨慎。**

**别人从你这里拿利息的时候就会想方设法尽可能的从你这里捞钱，算出来的年化率就会很高；你从别人那里拿利息的时候，别人就会绞尽脑汁的尽可能少给你钱，算出来的年化率就会很低。**
